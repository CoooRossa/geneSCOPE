% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/internal_metrics_tests.R
\name{.compute_density}
\alias{.compute_density}
\title{Compute per-grid gene density}
\usage{
.compute_density(
  scope_obj,
  grid_name = NULL,
  density_name = "density",
  genes = NULL,
  cluster_col = NULL,
  cluster_num = NULL,
  layer_name = "counts",
  normalize_method = c("none", "per_grid", "global_gene"),
  verbose = TRUE
)
}
\arguments{
\item{scope_obj}{A `scope_object` with grid data.}

\item{grid_name}{Grid layer to use (defaults to active layer).}

\item{density_name}{Output column name for the density values.}

\item{genes}{Optional genes to aggregate.}

\item{cluster_col}{Optional meta column to pick genes by cluster.}

\item{cluster_num}{Optional cluster identifier to select genes.}

\item{layer_name}{Layer containing counts (default `counts`).}

\item{normalize_method}{Normalization mode (`none`, `per_grid`, `global_gene`).}

\item{verbose}{Emit progress messages when TRUE.}
}
\value{
The modified `scope_object`.
}
\description{
Internal helper for `.compute_density`.
Aggregates counts for a gene set within each grid tile and stores density
per unit area under `scope_obj@density`.
}
\keyword{internal}
