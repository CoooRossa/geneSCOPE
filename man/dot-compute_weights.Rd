% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/internal_spatial_weights.R
\name{.compute_weights}
\alias{.compute_weights}
\title{Builds spatial neighbourhood structures, converts them to listw/sparse}
\usage{
.compute_weights(
  scope_obj,
  grid_name = NULL,
  style = "B",
  store_mat = TRUE,
  zero_policy = TRUE,
  store_listw = TRUE,
  verbose = TRUE,
  topology = c("auto", "queen", "rook", "hex", "fuzzy_queen", "fuzzy_hex"),
  nb_order = 1L,
  min_neighbors = NULL,
  max_order = NULL,
  kernel_radius = NULL,
  kernel_sigma = NULL,
  ncores = detectCores(logical = TRUE)
)
}
\arguments{
\item{scope_obj}{A `scope_object` with grid layers.}

\item{grid_name}{Grid layer name (defaults to active layer).}

\item{style}{Style for `nb2listw` (default `B`).}

\item{store_mat}{Store the adjacency matrix in the grid layer when TRUE.}

\item{zero_policy}{Whether zero-neighbour cells are allowed.}

\item{store_listw}{Store the `listw` object when TRUE.}

\item{verbose}{Emit progress messages when TRUE.}

\item{topology}{Topology choice (`auto`, `queen`, `rook`, `hex`, `fuzzy_queen`, `fuzzy_hex`).}

\item{nb_order}{Optional higher-order neighbour expansion.}

\item{min_neighbors}{Minimum neighbour count when expanding (non-kernel styles).}

\item{max_order}{Maximum neighbour order (non-kernel styles).}

\item{kernel_radius}{Kernel radius for `style="kernel_*"` (overrides `max_order`).}

\item{kernel_sigma}{Kernel sigma for `style="kernel_*"` (overrides `min_neighbors`).}

\item{ncores}{Number of threads to use.}
}
\value{
The modified `scope_object`.
}
\description{
Internal helper for `.compute_weights`.
matrices, and stores results under the grid layer (including fuzzy weights).
}
\keyword{internal}
