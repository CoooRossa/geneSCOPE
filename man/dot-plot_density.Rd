% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/internal_misc.R, R/internal_plotting.R
\name{.plot_density}
\alias{.plot_density}
\title{Plot Density}
\usage{
.plot_density(
  scope_obj,
  grid_name,
  density1_name,
  density2_name = NULL,
  palette1 = "#fc3d5d",
  palette2 = "#4753f8",
  alpha1 = 0.5,
  alpha2 = 0.5,
  tile_shape = c("square", "circle", "hex"),
  hex_orientation = c("flat", "pointy"),
  aspect_ratio = NULL,
  scale_bar_pos = NULL,
  scale_bar_show = TRUE,
  scale_bar_colour = "black",
  scale_bar_corner = c("bottom-left", "bottom-right", "top-left", "top-right"),
  use_histology = TRUE,
  histology_level = c("lowres", "hires"),
  axis_mode = c("grid", "image"),
  overlay_image = FALSE,
  image_path = NULL,
  image_alpha = 0.6,
  image_choice = c("auto", "hires", "lowres"),
  seg_type = c("cell", "nucleus", "both"),
  colour_cell = "black",
  colour_nucleus = "#3182bd",
  alpha_seg = 0.2,
  grid_gap = 100,
  scale_text_size = 2.4,
  bar_len = 400,
  bar_offset = 0.01,
  arrow_pt = 4,
  scale_legend_colour = "black",
  max.cutoff1 = 1,
  max.cutoff2 = 1,
  legend_digits = 1
)

.plot_density(
  scope_obj,
  grid_name,
  density1_name,
  density2_name = NULL,
  palette1 = "#fc3d5d",
  palette2 = "#4753f8",
  alpha1 = 0.5,
  alpha2 = 0.5,
  tile_shape = c("square", "circle", "hex"),
  hex_orientation = c("flat", "pointy"),
  aspect_ratio = NULL,
  scale_bar_pos = NULL,
  scale_bar_show = TRUE,
  scale_bar_colour = "black",
  scale_bar_corner = c("bottom-left", "bottom-right", "top-left", "top-right"),
  use_histology = TRUE,
  histology_level = c("lowres", "hires"),
  axis_mode = c("grid", "image"),
  overlay_image = FALSE,
  image_path = NULL,
  image_alpha = 0.6,
  image_choice = c("auto", "hires", "lowres"),
  seg_type = c("cell", "nucleus", "both"),
  colour_cell = "black",
  colour_nucleus = "#3182bd",
  alpha_seg = 0.2,
  grid_gap = 100,
  scale_text_size = 2.4,
  bar_len = 400,
  bar_offset = 0.01,
  arrow_pt = 4,
  scale_legend_colour = "black",
  max.cutoff1 = 1,
  max.cutoff2 = 1,
  legend_digits = 1
)
}
\arguments{
\item{scope_obj}{A \code{scope_object}.}

\item{grid_name}{Name of the grid layer to plot (e.g. "grid50").}

\item{density1_name}{Column names to plot.}

\item{density2_name}{Column names to plot.}

\item{palette1}{Color palettes for density1 and density2.}

\item{palette2}{Color palettes for density1 and density2.}

\item{alpha1}{Alpha transparency for density layers.}

\item{alpha2}{Alpha transparency for density layers.}

\item{tile_shape}{Shape used to render each grid tile: "square", "circle", or "hex".}

\item{hex_orientation}{Orientation for hex tiles ("flat" = flat-top, "pointy" = pointy-top).}

\item{aspect_ratio}{Optional numeric width/height ratio to enforce for the grid axes;
when `NULL`, the raw `grid_info` extents are used (no forced square padding).}

\item{scale_bar_pos}{Optional numeric vector (x,y) with fractional offsets for the scale bar
relative to the plotting window (0 = left/bottom, 1 = right/top).}

\item{scale_bar_show}{Logical toggle controlling whether the scale bar is drawn.}

\item{scale_bar_colour}{Colour used for the scale bar line and text (default black).}

\item{scale_bar_corner}{Corner preset for the scale bar when `scale_bar_pos` is not supplied;
choices are "bottom-left", "bottom-right", "top-left", "top-right".}

\item{use_histology}{Logical; overlay histology stored on the grid when available.}

\item{histology_level}{Which histology slot ("lowres" or "hires") to prioritise.}

\item{axis_mode}{Coordinate space for the plot: `"grid"` (microns) or `"image"` (pixels).}

\item{overlay_image}{Parameter value.}

\item{image_path}{Filesystem path.}

\item{image_alpha}{Parameter value.}

\item{image_choice}{Parameter value.}

\item{seg_type}{Segmentation overlay type: "cell", "nucleus", or "both".}

\item{colour_cell}{Colors for cell and nucleus segmentation.}

\item{colour_nucleus}{Colors for cell and nucleus segmentation.}

\item{alpha_seg}{Alpha transparency for segmentation overlay.}

\item{grid_gap}{Spacing for background grid lines.}

\item{scale_text_size}{Font size for scale bar text.}

\item{bar_len}{Length of scale bar in micrometers.}

\item{bar_offset}{Vertical offset of scale bar as fraction of y-range.}

\item{arrow_pt}{Arrow point size for scale bar.}

\item{scale_legend_colour}{Color of scale bar and text.}

\item{max.cutoff1}{Maximum cutoff fractions for density values.}

\item{max.cutoff2}{Maximum cutoff fractions for density values.}

\item{legend_digits}{Number of decimal places in legend.}
}
\value{
A `ggplot` object (or a list of plot components) used internally.

A \code{ggplot} object.
}
\description{
Internal helper for `.plot_density`.

Internal helper for `.plot_density`.
}
\details{
4.PlotDensity.r (2025-01-06 rev)
}
\keyword{internal}
