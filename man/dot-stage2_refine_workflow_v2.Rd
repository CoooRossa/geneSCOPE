% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/internal_pipeline.R
\name{.stage2_refine_workflow_v2}
\alias{.stage2_refine_workflow_v2}
\title{Stage2 Refine Workflow V2}
\usage{
.stage2_refine_workflow_v2(
  stage1,
  similarity_matrix,
  config,
  FDR = NULL,
  mh_object = NULL,
  aux_stats = NULL,
  pearson_matrix = NULL,
  verbose = TRUE
)

.stage2_refine_workflow_v2(
  stage1,
  similarity_matrix,
  config,
  FDR = NULL,
  mh_object = NULL,
  aux_stats = NULL,
  pearson_matrix = NULL,
  verbose = TRUE
)
}
\arguments{
\item{stage1}{Output list from `.stage1_consensus_workflow_v2()`.}

\item{similarity_matrix}{Full similarity matrix.}

\item{config}{List of refinement parameters (algo selections, thresholds,
consensus options, minimum cluster sizes, etc.).}

\item{FDR}{Optional FDR matrix aligned to similarity_matrix when CI95 filtering.}

\item{mh_object}{Optional MH weighting object (igraph or matrix).}

\item{aux_stats}{Optional auxiliary stats (e.g., curve layers for CI95).}

\item{pearson_matrix}{Optional Pearson correlation matrix for CI95 filtering.}

\item{verbose}{Logical; emit progress logs.}
}
\value{
Return value used internally.

List containing refined membership vector, consensus graph/matrix, and
  associated metrics plus intermediate matrices used by downstream steps.
}
\description{
Internal helper for `.stage2_refine_workflow_v2`.

Internal helper for `.stage2_refine_workflow_v2`.
Applies MH weighting/CI95 filtering and optional sub-clustering to refine
stage-1 results, producing corrected memberships and consensus graphs.
}
\keyword{internal}
