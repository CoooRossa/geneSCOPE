% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{listw_B_omp}
\alias{listw_B_omp}
\title{Convert Neighbour List to Binary Sparse Matrix (dgCMatrix)}
\usage{
listw_B_omp(nb)
}
\arguments{
\item{nb}{An object of class \code{nb}, typically returned by
\code{grid_nb_omp()} or \pkg{spdep} functions.}
}
\value{
A \code{dgCMatrix} of dimension \eqn{n \times n} where \eqn{n} is
  the number of regions. Entries are \code{1} where two regions are
  adjacent and \code{0} elsewhere.
}
\description{
Transforms an \code{nb} neighbourhood list into a column-compressed
  binary sparse matrix of class \code{dgCMatrix}. The routine streams the
  triplet representation in parallel with OpenMP and finally constructs the
  sparse matrix with Eigen.
}
\details{
The neighbour indices are 1-based; they are converted to 0-based before
  creation of the triplets for Eigen. Each thread accumulates its own
  vector of triplets to avoid synchronisation. After the parallel region
  all triplets are concatenated and the resulting sparse matrix is
  compressed in column-major order.
}
\examples{
\dontrun{
nb  <- grid_nb_omp(512, 512, queen = FALSE)
W   <- listw_B_omp(nb)
Matrix::nnzero(W) / length(nb)  # average degree
}
}
