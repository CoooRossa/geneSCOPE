# geneSCOPE Package Tests

## 概述
本目录包含geneSCOPE R包的单元测试，使用`testthat`框架实现。

## 测试文件结构
```
tests/
├── testthat.R           # 测试入口点
└── testthat/
    ├── test-hello.R         # 基础包功能测试
    └── test-core-functions.R # 核心函数测试
```

## 测试内容

### test-hello.R
- **包加载测试**: 验证geneSCOPE包能正确加载
- **基础工具函数**: 测试`detectOS()`和`getSafeThreadCount()`函数

### test-core-functions.R
- **操作系统检测**: 验证`detectOS()`返回正确的操作系统类型
- **线程安全**: 测试`getSafeThreadCount()`返回合理的线程数
- **随机数生成**: 验证`fixRNG()`能设置可重现的随机状态
- **函数导出**: 确认核心函数正确导出到NAMESPACE
- **包元数据**: 验证包版本信息和加载状态

## 运行测试

### 使用devtools（推荐）:
```r
devtools::test()
```

### 使用testthat直接运行:
```r
testthat::test_dir("tests/testthat")
```

### 运行单个测试文件:
```r
testthat::test_file("tests/testthat/test-hello.R")
```

## 测试结果状态
✅ **当前状态**: 所有27个测试通过 (0 失败, 0 警告, 0 跳过)

## 测试覆盖范围
当前测试覆盖以下功能：
- ✅ 包加载和基础元数据
- ✅ 操作系统检测
- ✅ 线程管理工具函数
- ✅ 随机数生成器
- ✅ 核心函数导出验证

## 扩展测试（未来计划）
为了更全面的测试覆盖，可以考虑添加：
- 空间权重计算测试（需要测试数据）
- Lee's L统计量计算测试
- 可视化函数测试
- 性能基准测试
- 边界条件和错误处理测试

## 注意事项
1. 当前测试主要关注**基础功能**和**函数导出**
2. **不包含数据密集型测试**，避免测试时间过长
3. 所有测试都是**自包含的**，不依赖外部数据文件
4. 测试设计为**快速执行**，适合CI/CD流水线

## 贡献指南
添加新测试时请：
1. 遵循现有的命名约定 (`test-*.R`)
2. 使用描述性的测试名称
3. 每个测试应该独立且确定性
4. 避免长时间运行的测试
5. 添加适当的测试文档

---
**维护**: FG Team | **最后更新**: 2025-01-09
